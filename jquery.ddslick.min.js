!function(a){function g(a,b){var c=a.find(".dd-option-value[value= '"+b+"']").parents("li").prevAll().length;h(a,c)}function h(a,b){var c=a.data("ddslick"),d=a.find(".dd-selected"),e=d.siblings(".dd-selected-value"),h=(a.find(".dd-options"),d.siblings(".dd-pointer"),a.find(".dd-option").eq(b)),i=h.closest("li"),l=c.settings,m=c.settings.data[b];a.find(".dd-option").removeClass("dd-option-selected"),h.addClass("dd-option-selected"),c.selectedIndex=b,c.selectedItem=i,c.selectedData=m,l.showSelectedHTML?d.html((m.imageSrc?'<img class="dd-selected-image'+("right"==l.imagePosition?" dd-image-right":"")+'" src="'+m.imageSrc+'" />':"")+(m.text?'<label class="dd-selected-text">'+m.text+"</label>":"")+(m.description?'<small class="dd-selected-description dd-desc'+(l.truncateDescription?" dd-selected-description-truncated":"")+'" >'+m.description+"</small>":"")):d.html(m.text),e.val(m.value),c.original.val(m.value),a.data("ddslick",c),j(a),k(a),"function"==typeof l.onSelected&&l.onSelected.call(this,c)}function i(b){var c=b.find(".dd-select"),d=c.siblings(".dd-options"),e=c.find(".dd-pointer"),f=d.is(":visible");a(".dd-click-off-close").not(d).slideUp(50),a(".dd-pointer").removeClass("dd-pointer-up"),c.removeClass("dd-open"),f?(d.slideUp("fast"),e.removeClass("dd-pointer-up"),c.removeClass("dd-open")):(c.addClass("dd-open"),d.slideDown("fast"),e.addClass("dd-pointer-up")),l(b)}function j(a){a.find(".dd-select").removeClass("dd-open"),a.find(".dd-options").slideUp(50),a.find(".dd-pointer").removeClass("dd-pointer-up").removeClass("dd-pointer-up")}function k(a){var b=a.find(".dd-select").css("height"),c=a.find(".dd-selected-description"),d=a.find(".dd-selected-image");c.length<=0&&d.length>0&&a.find(".dd-selected-text").css("lineHeight",b)}function l(b){b.find(".dd-option").each(function(){var c=a(this),d=c.css("height"),e=c.find(".dd-option-description"),f=b.find(".dd-option-image");e.length<=0&&f.length>0&&c.find(".dd-option-text").css("lineHeight",d)})}a.fn.ddslick=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exists."):b.init.apply(this,arguments)};var b={},c={data:[],keepJSONItemsOnTop:!1,width:260,height:null,background:"#eee",selectText:"",defaultSelectedIndex:null,truncateDescription:!0,imagePosition:"left",showSelectedHTML:!0,clickOffToClose:!0,embedCSS:!0,onSelected:function(){}},d='<div class="dd-select"><input class="dd-selected-value" type="hidden" /><a class="dd-selected"></a><span class="dd-pointer dd-pointer-down"></span></div>',e='<ul class="dd-options"></ul>',f='<style id="css-ddslick" type="text/css">.dd-select{ border-radius:2px; border:solid 1px #ccc; position:relative; cursor:pointer;}.dd-desc { color:#aaa; display:block; overflow: hidden; font-weight:normal; line-height: 1.4em; }.dd-selected{ overflow:hidden; display:block; padding:10px; font-weight:bold;}.dd-pointer{ width:0; height:0; position:absolute; right:10px; top:50%; margin-top:-3px;}.dd-pointer-down{ border:solid 5px transparent; border-top:solid 5px #000; }.dd-pointer-up{border:solid 5px transparent !important; border-bottom:solid 5px #000 !important; margin-top:-8px;}.dd-options{ border:solid 1px #ccc; border-top:none; list-style:none; box-shadow:0px 1px 5px #ddd; display:none; position:absolute; z-index:2000; margin:0; padding:0;background:#fff; overflow:auto;}.dd-option{ padding:10px; display:block; border-bottom:solid 1px #ddd; overflow:hidden; text-decoration:none; color:#333; cursor:pointer;-webkit-transition: all 0.25s ease-in-out; -moz-transition: all 0.25s ease-in-out;-o-transition: all 0.25s ease-in-out;-ms-transition: all 0.25s ease-in-out; }.dd-options > li:last-child > .dd-option{ border-bottom:none;}.dd-option:hover{ background:#f3f3f3; color:#000;}.dd-selected-description-truncated { text-overflow: ellipsis; white-space:nowrap; }.dd-option-selected { background:#f6f6f6; }.dd-option-image, .dd-selected-image { vertical-align:middle; float:left; margin-right:5px; max-width:64px;}.dd-image-right { float:right; margin-right:15px; margin-left:5px;}.dd-container{ position:relative;}​ .dd-selected-text { font-weight:bold}​</style>';b.init=function(b){var g=a.extend({},c,b);return a("#css-ddslick").length<=0&&g.embedCSS&&a(f).appendTo("head"),this.each(function(){var f=a.extend({},c,b),g=a(this),j=g.data("ddslick");if(!j){var k=[];f.data;g.find("option").each(function(){var b=a(this),c=b.data();k.push({text:a.trim(b.text()),value:b.val(),selected:b.is(":selected"),description:c.description,imageSrc:c.imagesrc})}),f.keepJSONItemsOnTop?a.merge(f.data,k):f.data=a.merge(k,f.data);var m=g,n=a("<div>").attr("id",g.attr("id")+"-dd-placeholder");g.replaceWith(n),g=n,g.addClass("dd-container").append(d).append(e),g.find("input.dd-selected-value").attr("id",a(m).attr("id")).attr("name",a(m).attr("name"));var k=g.find(".dd-select"),o=g.find(".dd-options");o.css({width:f.width}),k.css({width:f.width,background:f.background}),g.css({width:f.width}),null!=f.height&&o.css({height:f.height,overflow:"auto"}),a.each(f.data,function(a,b){b.selected&&(f.defaultSelectedIndex=a),o.append('<li><a class="dd-option">'+(b.value?' <input class="dd-option-value" type="hidden" value="'+b.value+'" />':"")+(b.imageSrc?' <img class="dd-option-image'+("right"==f.imagePosition?" dd-image-right":"")+'" src="'+b.imageSrc+'" />':"")+(b.text?' <label class="dd-option-text">'+b.text+"</label>":"")+(b.description?' <small class="dd-option-description dd-desc">'+b.description+"</small>":"")+"</a></li>")});var p={settings:f,original:m,selectedIndex:-1,selectedItem:null,selectedData:null};if(g.data("ddslick",p),f.selectText.length>0&&null==f.defaultSelectedIndex)g.find(".dd-selected").html(f.selectText);else{var q=null!=f.defaultSelectedIndex&&f.defaultSelectedIndex>=0&&f.defaultSelectedIndex<f.data.length?f.defaultSelectedIndex:0;h(g,q)}g.find(".dd-select").on("click.ddslick",function(){i(g)}),g.find(".dd-option").on("click.ddslick",function(){h(g,a(this).closest("li").index())}),f.clickOffToClose&&(o.addClass("dd-click-off-close"),g.on("click.ddslick",function(a){a.stopPropagation()}),a("body").on("click",function(){a(".dd-open").removeClass("dd-open"),a(".dd-click-off-close").slideUp(50).siblings(".dd-select").find(".dd-pointer").removeClass("dd-pointer-up")}))}})},b.select=function(b){return this.each(function(){void 0!==b.index&&h(a(this),b.index),b.id&&g(a(this),b.id)})},b.open=function(){return this.each(function(){var b=a(this),c=b.data("ddslick");c&&i(b)})},b.close=function(){return this.each(function(){var b=a(this),c=b.data("ddslick");c&&j(b)})},b.destroy=function(){return this.each(function(){var b=a(this),c=b.data("ddslick");if(c){var d=c.original;b.removeData("ddslick").unbind(".ddslick").replaceWith(d)}})}}(jQuery);
